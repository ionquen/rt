(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{YGSB:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var c=n("nKUr"),r=n("rePB"),a=n("KQm4"),o=(n("20a2"),n("q1tI")),i=n("50bU"),s=n.n(i),l=n("Jq4i"),u=n("quuy");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=["Arial","Times New Roman","Arial Black","Comic Sans MS","Courier New","Georgia","Impact","Trebuchet MS","Verdana"],m=[1,2,3,4,5,6,7];function f(){document.execCommand("italic",!1,null)}function O(){document.execCommand("bold",!1,null)}function x(){document.execCommand("under",!1,null)}function v(){document.execCommand("strikethrough",!1,null)}function h(){document.execCommand("insertUnorderedList",!1,null)}function g(){document.execCommand("insertOrderedList",!1,null)}function p(){document.execCommand("undo",!1,null)}function C(){document.execCommand("redo",!1,null)}function S(){document.execCommand("removeFormat",!1,null),document.execCommand("unlink",!1,null)}function k(){window.print()}function y(e){var t=e.props,n=Object(o.useState)([]),i=n[0],d=n[1],y=Object(o.useState)(null),L=y[0],P=y[1],K=Object(o.useState)(""),I=K[0],M=K[1],A=Object(o.useState)(0),R=A[0],T=A[1],B=Object(o.useState)(!1),q=B[0],z=B[1],F=Object(o.useState)(!1),H=F[0],J=F[1],U=Object(o.useState)(!1),G=U[0],Q=U[1],W=Object(o.useState)(!1),V=W[0],Y=W[1],X=Object(o.useState)(!1),Z=X[0],$=X[1],ee=Object(o.useState)(!1),te=ee[0],ne=ee[1],ce=Object(o.useState)("#ffffff"),re=ce[0],ae=ce[1],oe=Object(o.useState)("#000000"),ie=oe[0],se=oe[1],le=Object(o.useState)("Arial"),ue=le[0],de=le[1],be=Object(o.useState)(2),je=be[0],me=be[1],fe=Object(o.useState)(!0),Oe=fe[0],xe=fe[1],ve=Object(o.useRef)(null),he=Object(o.useRef)(null),ge=Object(o.useRef)(null);function pe(){xe((function(e){return!e}))}function Ce(e){he.current.transaction("list","readwrite").objectStore("list").put(e)}function Se(){var e=Date.now(),n={id:e,modify:e,name:t.desc.nameless};d((function(e){return[n].concat(Object(a.a)(e))})),Ce(n),P(e)}return Object(o.useEffect)((function(){var e=indexedDB.open("dbnotes",1);function t(e){try{var t=document.getSelection().getRangeAt(0),n=function(e){var t=e;for(;t;){if(null===(t=t.parentNode))return null;if("true"===t.contentEditable)return t}}(t.startContainer);if(null===n)return;switch(J(_(t.startContainer,n,"b")),z(_(t.startContainer,n,"u")),Q(_(t.startContainer,n,"i")),Y(_(t.startContainer,n,"strike")),de(D(t.startContainer,n,"fontFamily")),D(t.startContainer,n,"fontSize")){case"x-small":me(1);break;case"small":me(2);break;case"medium":me(3);break;case"large":me(4);break;case"x-large":me(5);break;case"xx-large":me(6);break;case"xxx-large":me(7)}ae(D(t.startContainer,n,"backgroundColor")),se(D(t.startContainer,n,"color")),ne(_(t.startContainer,n,"ol")),$(_(t.startContainer,n,"ul"))}catch(c){}}return e.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("data")||t.createObjectStore("data"),t.objectStoreNames.contains("list")||t.createObjectStore("list",{keyPath:"id"})},e.onsuccess=function(e){he.current=e.target.result,he.current.transaction("list","readonly").objectStore("list").getAll().onsuccess=function(e){if(0!==e.target.result.length){d(e.target.result);var t=localStorage.getItem("noteCurrent");if(null!==t)return P(Number(t))}Se()}},document.addEventListener("selectionchange",t),function(){try{e.close()}catch(n){}document.removeEventListener("selectionchange",t)}}),[]),Object(o.useEffect)((function(){if(null!==L){localStorage.setItem("noteCurrent",L),he.current.transaction("data","readonly").objectStore("data").get(L).onsuccess=function(e){void 0===e.target.result?ge.current.innerHTML="":ge.current.innerHTML=e.target.result};var e=setInterval((function(){L===L&&he.current.transaction("data","readwrite").objectStore("data").put(ge.current.innerHTML,L)}),1e3);return function(){return clearInterval(e)}}}),[L]),Object(o.useEffect)((function(){var e=i.filter((function(e){return e.id===L}));0!==e.length&&(M(e[0].name),T(e[0].modify))}),[i,L]),Object(c.jsxs)("div",{className:s.a.block,ref:ve,children:[Object(c.jsxs)("div",{className:s.a.note,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("input",{value:I,onChange:function(e){return t=L,n="name",c=e.target.value,void d((function(e){return e.map((function(e){if(e.id===t){var a,o=b(b({},e),{},(a={},Object(r.a)(a,n,c),Object(r.a)(a,"modify",Date.now()),a));return Ce(o),o}return e}))}));var t,n,c},spellCheck:!1}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{children:[t.desc.created,": "]}),Object(c.jsx)("span",{children:N(L)})]}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{children:[t.desc.modify,":"]}),Object(c.jsxs)("span",{children:[" ",N(R)]})]})]}),Object(c.jsx)(u.a,{elem:ve.current})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{"data-tooltip":t.desc.tab.undo,onClick:p,children:Object(c.jsx)(l.a,{name:"text_formatter/undo.svg"})}),Object(c.jsx)("button",{"data-tooltip":t.desc.tab.redo,onClick:C,children:Object(c.jsx)(l.a,{name:"text_formatter/redo.svg"})}),Object(c.jsx)("div",{children:Object(c.jsx)("select",{"data-tooltip":t.desc.tab.size,value:je,onChange:function(e){E((function(){return document.execCommand("fontSize",!1,Number(e.target.value))})),me(e.target.value)},children:Object(c.jsx)(w,{arr:m})})}),Object(c.jsx)("div",{children:Object(c.jsx)("select",{"data-tooltip":t.desc.tab.font,value:ue,onChange:function(e){E((function(){return document.execCommand("fontName",!1,e.target.value)})),de(e.target.value)},children:Object(c.jsx)(w,{arr:j})})}),Object(c.jsx)("button",{className:q?s.a.select:"","data-tooltip":t.desc.tab.under,onClick:x,children:Object(c.jsx)(l.a,{name:"text_formatter/underlined.svg"})}),Object(c.jsx)("button",{className:H?s.a.select:"","data-tooltip":t.desc.tab.bold,onClick:O,children:Object(c.jsx)(l.a,{name:"text_formatter/bold.svg"})}),Object(c.jsx)("button",{className:"".concat(s.a.cursive," ").concat(G?s.a.select:""),"data-tooltip":t.desc.tab.cursive,onClick:f,children:Object(c.jsx)(l.a,{name:"text_formatter/italic.svg"})}),Object(c.jsx)("button",{className:"".concat(s.a.through," ").concat(V?s.a.select:""),"data-tooltip":t.desc.tab.through,onClick:v,children:Object(c.jsx)(l.a,{name:"text_formatter/strikethrough.svg"})}),Object(c.jsxs)("label",{style:{fill:ie},children:[Object(c.jsx)(l.a,{name:"text_formatter/color.svg"}),Object(c.jsx)("input",{"data-tooltip":t.desc.tab.color,type:"color",onChange:function(e){E((function(){return document.execCommand("foreColor",!1,e.target.value)})),se(e.target.value)}})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("div",{style:{backgroundColor:re}}),Object(c.jsx)("input",{"data-tooltip":t.desc.tab.back,type:"color",onChange:function(e){E((function(){return document.execCommand("hiliteColor",!1,e.target.value)})),ae(e.target.value)}})]}),Object(c.jsx)("button",{className:te?s.a.select:"","data-tooltip":t.desc.tab.ol,onClick:g,children:Object(c.jsx)(l.a,{name:"text_formatter/list_numbered.svg"})}),Object(c.jsx)("button",{className:Z?s.a.select:"","data-tooltip":t.desc.tab.ul,onClick:h,children:Object(c.jsx)(l.a,{name:"text_formatter/list_bulleted.svg"})}),Object(c.jsx)("button",{"data-tooltip":t.desc.tab.clear,onClick:S,children:Object(c.jsx)(l.a,{name:"text_formatter/format_clear.svg"})}),Object(c.jsx)("button",{"data-tooltip":t.desc.tab.print,onClick:k,children:Object(c.jsx)(l.a,{name:"text_formatter/print.svg"})}),Object(c.jsx)("button",{className:Oe?s.a.select:"","data-tooltip":t.desc.tab.spell,onClick:pe,children:Object(c.jsx)(l.a,{name:"text_formatter/spellcheck.svg"})})]}),Object(c.jsx)("div",{contentEditable:!0,spellCheck:Oe,ref:ge,onKeyDown:function(e){var t=e.code,n=e.ctrlKey;function c(e,t){e.preventDefault(),t()}if(console.log(e),n)switch(t){case"KeyS":c(e,v);break;case"KeyO":c(e,g);break;case"KeyM":c(e,h);break;case"KeyL":c(e,S);break;case"Quote":c(e,pe)}}})]}),Object(c.jsxs)("div",{className:s.a.list,children:[Object(c.jsx)("button",{onClick:Se,children:t.desc.add}),Object(c.jsx)("div",{children:i.map((function(e){return Object(c.jsxs)("div",{className:L===e.id?s.a.current:"",onClick:function(){return P(e.id)},children:[Object(c.jsx)("div",{children:e.name}),1===i.length?null:Object(c.jsx)("button",{onClick:function(){return function(e){d((function(t){var n=t.filter((function(t){return t.id!==e}));return P(n[0].id),n}));var t=he.current.transaction(["list","data"],"readwrite");t.objectStore("list").delete(e),t.objectStore("data").delete(e)}(e.id)},children:Object(c.jsx)(l.a,{name:"var/x.svg"})}),Object(c.jsx)("div",{children:new Date(e.modify).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]},e.id)}))})]})]})}function w(e){var t=e.arr,n=e.before,r=e.after;return Object(c.jsx)(c.Fragment,{children:t.map((function(e){return Object(c.jsxs)("option",{value:e,children:[n," ",e," ",r]},e)}))})}function N(e){return new Date(e).toLocaleDateString(void 0,{month:"long",day:"numeric",hour:"numeric",minute:"numeric"})}function _(e,t,n){for(var c=e;c;){if((c=c.parentNode)===t)return!1;if(c.localName===n)return!0}}function D(e,t,n){for(var c=e;c;){if((c=c.parentNode)===t)return null;if(""!==c.style[n])return c.style[n]}}function E(e){document.execCommand("styleWithCSS",!1,!0),e(),document.execCommand("styleWithCSS",!1,!1)}}}]);