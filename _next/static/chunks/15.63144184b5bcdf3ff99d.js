(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{Qlt3:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));var c=["Times New Roman","Arial","Arial Black","Bookman Old Style","Century Gothic","Comic Sans MS","Courier","Courier New","Garamond","Georgia","Impact","Lucida Console","MS Sans Serif","MS Serif","Palatino Linotype","Tahoma","Trebuchet MS","Verdana"],r=[6,8,10,12,14,16,18,20,22,24,26,30,34,38,42,46,52,56,64,72,108]},YGSB:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return k}));var c=n("rePB"),r=n("KQm4"),a=(n("nOHt"),n("q1tI")),o=n("50bU"),i=n.n(o),s=n("Jq4i"),l=n("quuy"),u=n("Qlt3"),d=n("nKUr");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,c)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=[1,2,3,4,5,6,7];function f(){document.execCommand("italic",!1,null)}function O(){document.execCommand("bold",!1,null)}function x(){document.execCommand("under",!1,null)}function v(){document.execCommand("strikethrough",!1,null)}function h(){document.execCommand("insertUnorderedList",!1,null)}function g(){document.execCommand("insertOrderedList",!1,null)}function p(){document.execCommand("undo",!1,null)}function C(){document.execCommand("redo",!1,null)}function S(){document.execCommand("removeFormat",!1,null),document.execCommand("unlink",!1,null)}function y(){window.print()}function k(e){var t=e.props,n=Object(a.useState)([]),o=n[0],b=n[1],k=Object(a.useState)(null),E=k[0],P=k[1],K=Object(a.useState)(""),M=K[0],I=K[1],T=Object(a.useState)(0),A=T[0],B=T[1],R=Object(a.useState)(!1),G=R[0],H=R[1],Q=Object(a.useState)(!1),q=Q[0],z=Q[1],F=Object(a.useState)(!1),J=F[0],U=F[1],W=Object(a.useState)(!1),V=W[0],Y=W[1],X=Object(a.useState)(!1),Z=X[0],$=X[1],ee=Object(a.useState)(!1),te=ee[0],ne=ee[1],ce=Object(a.useState)("#ffffff"),re=ce[0],ae=ce[1],oe=Object(a.useState)("#000000"),ie=oe[0],se=oe[1],le=Object(a.useState)("Arial"),ue=le[0],de=le[1],be=Object(a.useState)(2),je=be[0],me=be[1],fe=Object(a.useState)(!0),Oe=fe[0],xe=fe[1],ve=Object(a.useRef)(null),he=Object(a.useRef)(null),ge=Object(a.useRef)(null);function pe(){xe((function(e){return!e}))}function Ce(e){he.current.transaction("list","readwrite").objectStore("list").put(e)}function Se(){var e=Date.now(),n={id:e,modify:e,name:t.desc.nameless};b((function(e){return[n].concat(Object(r.a)(e))})),Ce(n),P(e)}return Object(a.useEffect)((function(){var e=indexedDB.open("dbnotes",1);function t(e){try{var t=document.getSelection().getRangeAt(0),n=function(e){var t=e;for(;t;){if(null===(t=t.parentNode))return null;if("true"===t.contentEditable)return t}}(t.startContainer);if(null===n)return;switch(z(_(t.startContainer,n,"b")),H(_(t.startContainer,n,"u")),U(_(t.startContainer,n,"i")),Y(_(t.startContainer,n,"strike")),de(D(t.startContainer,n,"fontFamily")),D(t.startContainer,n,"fontSize")){case"x-small":me(1);break;case"small":me(2);break;case"medium":me(3);break;case"large":me(4);break;case"x-large":me(5);break;case"xx-large":me(6);break;case"xxx-large":me(7)}ae(D(t.startContainer,n,"backgroundColor")),se(D(t.startContainer,n,"color")),ne(_(t.startContainer,n,"ol")),$(_(t.startContainer,n,"ul"))}catch(c){}}return e.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("data")||t.createObjectStore("data"),t.objectStoreNames.contains("list")||t.createObjectStore("list",{keyPath:"id"})},e.onsuccess=function(e){he.current=e.target.result,he.current.transaction("list","readonly").objectStore("list").getAll().onsuccess=function(e){if(0!==e.target.result.length){b(e.target.result);var t=localStorage.getItem("noteCurrent");if(null!==t)return P(Number(t))}Se()}},document.addEventListener("selectionchange",t),function(){try{e.close()}catch(n){}document.removeEventListener("selectionchange",t)}}),[]),Object(a.useEffect)((function(){if(null!==E){localStorage.setItem("noteCurrent",E),he.current.transaction("data","readonly").objectStore("data").get(E).onsuccess=function(e){void 0===e.target.result?ge.current.innerHTML="":ge.current.innerHTML=e.target.result};var e=setInterval((function(){E===E&&he.current.transaction("data","readwrite").objectStore("data").put(ge.current.innerHTML,E)}),1e3);return function(){return clearInterval(e)}}}),[E]),Object(a.useEffect)((function(){var e=o.filter((function(e){return e.id===E}));0!==e.length&&(I(e[0].name),B(e[0].modify))}),[o,E]),Object(d.jsxs)("div",{className:i.a.block,ref:ve,children:[Object(d.jsxs)("div",{className:i.a.note,children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{value:M,onChange:function(e){return t=E,n="name",r=e.target.value,void b((function(e){return e.map((function(e){if(e.id===t){var a,o=j(j({},e),{},(a={},Object(c.a)(a,n,r),Object(c.a)(a,"modify",Date.now()),a));return Ce(o),o}return e}))}));var t,n,r},spellCheck:!1}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:[t.desc.created,": "]}),Object(d.jsx)("span",{children:N(E)})]}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("span",{children:[t.desc.modify,":"]}),Object(d.jsxs)("span",{children:[" ",N(A)]})]})]}),Object(d.jsx)(l.a,{elem:ve.current})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{"data-tooltip":t.desc.tab.undo,onClick:p,children:Object(d.jsx)(s.a,{name:"text_formatter/undo.svg"})}),Object(d.jsx)("button",{"data-tooltip":t.desc.tab.redo,onClick:C,children:Object(d.jsx)(s.a,{name:"text_formatter/redo.svg"})}),Object(d.jsx)("div",{children:Object(d.jsx)("select",{"data-tooltip":t.desc.tab.size,value:je,onChange:function(e){L((function(){return document.execCommand("fontSize",!1,Number(e.target.value))})),me(e.target.value)},children:Object(d.jsx)(w,{arr:m})})}),Object(d.jsx)("div",{children:Object(d.jsx)("select",{"data-tooltip":t.desc.tab.font,value:ue,onChange:function(e){L((function(){return document.execCommand("fontName",!1,e.target.value)})),de(e.target.value)},children:Object(d.jsx)(w,{arr:u.a})})}),Object(d.jsx)("button",{className:G?i.a.select:"","data-tooltip":t.desc.tab.under,onClick:x,children:Object(d.jsx)(s.a,{name:"text_formatter/underlined.svg"})}),Object(d.jsx)("button",{className:q?i.a.select:"","data-tooltip":t.desc.tab.bold,onClick:O,children:Object(d.jsx)(s.a,{name:"text_formatter/bold.svg"})}),Object(d.jsx)("button",{className:"".concat(i.a.cursive," ").concat(J?i.a.select:""),"data-tooltip":t.desc.tab.cursive,onClick:f,children:Object(d.jsx)(s.a,{name:"text_formatter/italic.svg"})}),Object(d.jsx)("button",{className:"".concat(i.a.through," ").concat(V?i.a.select:""),"data-tooltip":t.desc.tab.through,onClick:v,children:Object(d.jsx)(s.a,{name:"text_formatter/strikethrough.svg"})}),Object(d.jsxs)("label",{style:{fill:ie},children:[Object(d.jsx)(s.a,{name:"text_formatter/color.svg"}),Object(d.jsx)("input",{"data-tooltip":t.desc.tab.color,type:"color",onChange:function(e){L((function(){return document.execCommand("foreColor",!1,e.target.value)})),se(e.target.value)}})]}),Object(d.jsxs)("label",{children:[Object(d.jsx)("div",{style:{backgroundColor:re}}),Object(d.jsx)("input",{"data-tooltip":t.desc.tab.back,type:"color",onChange:function(e){L((function(){return document.execCommand("hiliteColor",!1,e.target.value)})),ae(e.target.value)}})]}),Object(d.jsx)("button",{className:te?i.a.select:"","data-tooltip":t.desc.tab.ol,onClick:g,children:Object(d.jsx)(s.a,{name:"text_formatter/list_numbered.svg"})}),Object(d.jsx)("button",{className:Z?i.a.select:"","data-tooltip":t.desc.tab.ul,onClick:h,children:Object(d.jsx)(s.a,{name:"text_formatter/list_bulleted.svg"})}),Object(d.jsx)("button",{"data-tooltip":t.desc.tab.clear,onClick:S,children:Object(d.jsx)(s.a,{name:"text_formatter/format_clear.svg"})}),Object(d.jsx)("button",{"data-tooltip":t.desc.tab.print,onClick:y,children:Object(d.jsx)(s.a,{name:"text_formatter/print.svg"})}),Object(d.jsx)("button",{className:Oe?i.a.select:"","data-tooltip":t.desc.tab.spell,onClick:pe,children:Object(d.jsx)(s.a,{name:"text_formatter/spellcheck.svg"})})]}),Object(d.jsx)("div",{contentEditable:!0,spellCheck:Oe,ref:ge,onKeyDown:function(e){var t=e.code,n=e.ctrlKey;function c(e,t){e.preventDefault(),t()}if(console.log(e),n)switch(t){case"KeyS":c(e,v);break;case"KeyO":c(e,g);break;case"KeyM":c(e,h);break;case"KeyL":c(e,S);break;case"Quote":c(e,pe)}}})]}),Object(d.jsxs)("div",{className:i.a.list,children:[Object(d.jsx)("button",{onClick:Se,children:t.desc.add}),Object(d.jsx)("div",{children:o.map((function(e){return Object(d.jsxs)("div",{className:E===e.id?i.a.current:"",onClick:function(){return P(e.id)},children:[Object(d.jsx)("div",{children:e.name}),1===o.length?null:Object(d.jsx)("button",{onClick:function(){return function(e){b((function(t){var n=t.filter((function(t){return t.id!==e}));return P(n[0].id),n}));var t=he.current.transaction(["list","data"],"readwrite");t.objectStore("list").delete(e),t.objectStore("data").delete(e)}(e.id)},children:Object(d.jsx)(s.a,{name:"var/x.svg"})}),Object(d.jsx)("div",{children:new Date(e.modify).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]},e.id)}))})]})]})}function w(e){var t=e.arr,n=e.before,c=e.after;return Object(d.jsx)(d.Fragment,{children:t.map((function(e){return Object(d.jsxs)("option",{value:e,children:[n," ",e," ",c]},e)}))})}function N(e){return new Date(e).toLocaleDateString(void 0,{month:"long",day:"numeric",hour:"numeric",minute:"numeric"})}function _(e,t,n){for(var c=e;c;){if((c=c.parentNode)===t)return!1;if(c.localName===n)return!0}}function D(e,t,n){for(var c=e;c;){if((c=c.parentNode)===t)return null;if(""!==c.style[n])return c.style[n]}}function L(e){document.execCommand("styleWithCSS",!1,!0),e(),document.execCommand("styleWithCSS",!1,!1)}}}]);